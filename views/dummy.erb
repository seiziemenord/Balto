<!DOCTYPE html>
<html>
<head>
  <title>Balto Consultation - Summary</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>Dummy Page</h2>
  <h2>Pet: <%= session[:pet] %></h2>
  <h2>Pet Name: <%= session[:pet_name] %></h2>
  <h2>Sex: <%= session[:sex] %></h2>
  <h2>Breed: <%= session[:breed] %></h2>
  <h2>k1: <%= session[:k1] %></h2>
  <h2>Age (years): <%= session[:age_years] %></h2>
  <h2>Age (months): <%= session[:age_months] %></h2>
  <h2>Age (total months): <%= session[:age_total_months] %></h2>
  <h2>Lifestage: <%= session[:lifestage] %></h2>
  <h2>neuter: <%= session[:neuter] %></h2>
  <h2>k3: <%= session[:k3] %></h2>
  <h2>body_condition: <%= session[:body_condition] %></h2>
  <h2>nec: <%= session[:nec] %></h2>
  <h2>weight_current: <%= session[:weight_current] %></h2>
  <h2>weight_adult: <%= session[:weight_adult] %></h2>
  <h2>weight_target: <%= session[:weight_target] %></h2>
  <h2>activity_level: <%= session[:activity_level] %></h2>
  <h2>k2: <%= session[:k2] %></h2>
  <h2>recovery_routine: <%= session[:recovery_routine] %></h2>
  <h2>food_type: <%= session[:food_type] %></h2>
  <h2>food_brand: <%= session[:food_brand] %></h2>
  <h2>Food brand score: <%= session[:food_brand_score] %></h2>
  <h2>ingredient_exclusion: <%= session[:ingredient_exclusion] %></h2>
  <h2>dental_brushing: <%= session[:dental_brushing] %></h2>
  <h2>dental_chews: <%= session[:dental_chews] %></h2>
  <h2>wellness_issues: <%= session[:wellness_issues] %></h2>
  <h2>email: <%= session[:email] %></h2>
  <h2>mer: <%= session[:mer] %></h2>
  <h2>Diet mix: <%= session[:diet_mix] %></h2>
  <h2>Protein sources: <%= session[:protein_sources] %></h2>
  <h2>Recommended products: <%= session[:product_recommendations] %></h2>
  <h2>Feeding plan in calories: <%= session[:daily_feeding_calories] %></h2>
  <h2>Feeding plan in grams: <%= session[:daily_feeding_grams] %></h2>
  <h2>Pet profile tags: <%= session[:pet_profile_tags] %></h2>
  <h2>Pet tips IDs: <%= session[:pet_tips] %></h2>
  <h2>Tip IDs array: <%= session[:tip_ids] %></h2>
  <h2>Grouped tips: <%= session[:grouped_tips] %></h2>
  <h2>Spider chart nutrition axis: <%= session[:spider_chart_nutrition] %></h2>
  <h2>Spider chart skin  axis: <%= session[:spider_chart_skin] %></h2>
    
  <h2>Spider chart:</h2>

  <div style="height: 300px">
    <canvas id="myChart"></canvas>
  </div>
  <script>
  const ctx = document.getElementById('myChart');
  new Chart(ctx, {
    type: 'radar',
    data: {
      labels: ['Nutrition', 'Mental', 'Dental', 'Body', 'Skin'],
      datasets: [{
        label: 'Pet wellness profile',
        backgroundColor: 'rgba(255, 99, 132, 0.2)',
        borderColor: 'rgba(255, 99, 132, 1)',
        data: [<%= session[:spider_chart_nutrition] %>, <%= session[:spider_chart_mental] %>, <%= session[:spider_chart_dental] %>, <%= session[:spider_chart_body] %>, <%= session[:spider_chart_skin] %>]
      }]
    },
    options: {
      responsive: false,
      maintainAspectRatio: true,
      scale: {
        min: 0,
        max: 5,
        ticks: {
          beginAtZero: true,
          min: 0,
          max: 5
        }
      }
    }
  });
</script>

<!--Retrieving tips block from index.rb -->
  <div>
    <% grouped_tips.each do |axis, subgroups| %>
      <h1><%= axis.to_s.capitalize %></h1>
      <% subgroups.each do |subgroup, tips| %>
        <h2><%= subgroup.to_s.capitalize %></h2>
        <% tips.each do |tip| %>
          <p><%= tip[:card_content] %></p>
        <% end %>
      <% end %>
    <% end %>
  </div>

</body>
</html>